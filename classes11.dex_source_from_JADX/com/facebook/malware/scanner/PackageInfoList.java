package com.facebook.malware.scanner;

import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

/* compiled from: Unexpected itemViewType */
public class PackageInfoList {
    public static List<PackageInfo> m10883a(Context context, int i) {
        return context.getPackageManager().getInstalledPackages(i);
    }

    public static List<PackageInfo> m10884b(Context context, int i) {
        Throwable th;
        Process process;
        BufferedReader bufferedReader = null;
        List<PackageInfo> arrayList = new ArrayList();
        PackageManager packageManager = context.getPackageManager();
        InputStreamReader inputStreamReader;
        try {
            Process exec = Runtime.getRuntime().exec("pm list packages");
            try {
                inputStreamReader = new InputStreamReader(exec.getInputStream());
                try {
                    BufferedReader bufferedReader2 = new BufferedReader(inputStreamReader);
                    while (true) {
                        try {
                            String readLine = bufferedReader2.readLine();
                            if (readLine == null) {
                                break;
                            }
                            arrayList.add(packageManager.getPackageInfo(readLine.substring(readLine.indexOf(58) + 1), i));
                        } catch (Throwable th2) {
                            th = th2;
                            bufferedReader = bufferedReader2;
                            process = exec;
                        }
                    }
                    if (exec != null) {
                        exec.waitFor();
                        exec.destroy();
                    }
                    bufferedReader2.close();
                    inputStreamReader.close();
                    return arrayList;
                } catch (Throwable th3) {
                    th = th3;
                    process = exec;
                    if (process != null) {
                        process.waitFor();
                        process.destroy();
                    }
                    if (bufferedReader != null) {
                        bufferedReader.close();
                    }
                    if (inputStreamReader != null) {
                        inputStreamReader.close();
                    }
                    throw th;
                }
            } catch (Throwable th4) {
                th = th4;
                inputStreamReader = null;
                process = exec;
                if (process != null) {
                    process.waitFor();
                    process.destroy();
                }
                if (bufferedReader != null) {
                    bufferedReader.close();
                }
                if (inputStreamReader != null) {
                    inputStreamReader.close();
                }
                throw th;
            }
        } catch (Throwable th5) {
            th = th5;
            inputStreamReader = null;
            process = null;
            if (process != null) {
                process.waitFor();
                process.destroy();
            }
            if (bufferedReader != null) {
                bufferedReader.close();
            }
            if (inputStreamReader != null) {
                inputStreamReader.close();
            }
            throw th;
        }
    }
}
